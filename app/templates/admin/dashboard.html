{% extends "base.html" %}
{% block title %}Dashboard Admin{% endblock %}

{% block content %}
<h2>Tableau de bord - Administrateur</h2>

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
{% endblock %}
<!-- üîç Filtres -->
<form method="get" class="mb-4 d-flex gap-3">
    <select name="filtre_statut" class="form-select w-auto">
        <option value="">-- Tous les statuts --</option>
        <option value="disponible" {% if filtre_statut == 'disponible' %}selected{% endif %}>Disponible</option>
        <option value="attribue" {% if filtre_statut == 'attribue' %}selected{% endif %}>Attribu√©</option>
    </select>

    <button type="submit" class="btn btn-primary">Filtrer</button>
</form>

<!-- üöó Liste des v√©hicules -->
<h4>V√©hicules</h4>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Marque</th>
            <th>Mod√®le</th>
            <th>Immatriculation</th>
            <th>Statut</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for v in vehicules %}
        <tr>
            <td data-label="Marque">{{ v.marque }}</td>
            <td data-label="Mod√®le">{{ v.modele }}</td>
            <td data-label="Immatriculation">{{ v.immatriculation }}</td>
            <td>
                {% if v.disponible %}
                    <span class="badge bg-success">Disponible</span>
                {% else %}
                    <span class="badge bg-warning text-dark">Attribu√©</span>
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for('admin.modifier_vehicule', vehicule_id=v.id) }}" class="btn btn-sm btn-info">Modifier</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a href="{{ url_for('admin.ajouter_vehicule') }}" class="btn btn-success mb-5">‚ûï Ajouter un v√©hicule</a>

<!-- üë®‚Äç‚úàÔ∏è Liste des conducteurs -->
<h4>Conducteurs</h4>
<table class="table table-hover">
    <thead>
        <tr>
            <th>Nom</th>
            <th>Email</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for conducteur in conducteurs %}
        <tr>
            <td>{{ conducteur.nom }}</td>
            <td>{{ conducteur.email }}</td>
            <td>
                <a href="{{ url_for('admin.attribuer_vehicule', conducteur_id=conducteur.id) }}" class="btn btn-sm btn-primary">Attribuer v√©hicule</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
